require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesC/pages/mymessage/mymessage"],{"08cd":function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var i=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"33c0":function(e,t,n){},"847a":function(e,t,n){"use strict";n.r(t);var r=n("d512"),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},"91d1":function(e,t,n){"use strict";(function(e){n("56cc");r(n("66fd"));var t=r(n("fce6"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},d512:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("6132"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return l(e)||c(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f={data:function(){return{isShowDel:!1,pageNo:1,allowPull:!1,msgArr:[],showDel:!1,isAll:!1}},computed:{title:function(){var e=[];return this.msgArr!=[]&&(e=this.msgArr.map((function(e){return"activity"==e.informType?"活动报名":"activityReply"==e.informType?"活动恢复":"articleReply"==e.informType?"动态回复":"wish"==e.informType?"心愿":void 0}))),e}},methods:{deleteUnreadMessage:function(){var t=this,n=this.msgArr.filter((function(e){return e.check}));if(0==n.length)return e.showToast({title:"请选中要删除的消息~",icon:"none"});var i=n.map((function(e){return e.informId}));r.default.deleteUnreadMessage({informId:i.join(";")},(function(e){console.log(e),t.setAll(),t.pageNo=1,t.getUnreadMessage()}))},setAll:function(){this.showDel=!1,this.msgArr.filter((function(e){e.check=!1}))},changeSelectAll:function(e){this.isAll=e,this.msgArr.filter((function(t){t.check=e}))},isSelect:function(e){this.msgArr[e].check=!this.msgArr[e].check,this.isSelectAll()},isSelectAll:function(){this.isAll=this.msgArr.every((function(e){return e.check}))},showDelFun:function(e){this.showDel=!this.showDel,this.showDel&&(this.msgArr[e].check=!0,this.isSelectAll())},pageToNew:function(t,n,r,i){this.msgArr[i].isRead||this.markRead(r,i),"activity"==t||"activityReply"==t?e.navigateTo({url:"/pagesB/pages/activitydetail/activitydetail?activityId="+n}):"articleReply"==t?e.navigateTo({url:"/pagesB/pages/dynamicdetail/dynamicdetail?articleId="+n}):"wish"==t&&e.navigateTo({url:"/pagesB/pages/hopeevaluation/hopeevaluation?msgId="+n})},markRead:function(e,t){var n=this;r.default.markRead({informId:e},(function(e){n.msgArr[t].isRead=!0}))},getUnreadMessage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"one";r.default.getUnreadMessage({pageNo:this.pageNo,pageSize:8},(function(n){if(console.log("消息列表",n),"one"==t){var r=n.list.map((function(e){return e.check=!1,e}));e.msgArr=r,e.allowPull=!n.lastPage}else{var i=n.list.map((function(e){return e.check=!1,e}));e.msgArr=[].concat(a(e.msgArr),a(i)),e.allowPull=!n.lastPage}}))}},onLoad:function(e){this.getUnreadMessage()},onReachBottom:function(){this.allowPull&&(this.pageNo++,this.getUnreadMessage("more"))},onPullDownRefresh:function(){this.pageNo=1,this.getUnreadMessage()}};t.default=f}).call(this,n("543d")["default"])},e185:function(e,t,n){"use strict";var r=n("33c0"),i=n.n(r);i.a},fce6:function(e,t,n){"use strict";n.r(t);var r=n("08cd"),i=n("847a");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("e185");var o,s=n("f0c5"),c=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=c.exports}},[["91d1","common/runtime","common/vendor"]]]);