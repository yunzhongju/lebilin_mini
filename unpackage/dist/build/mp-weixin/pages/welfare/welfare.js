(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/welfare/welfare"],{"3bc1":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(o("b07d")),i=r(o("6174")),s=r(o("b3a3")),a=r(o("2540"));function r(t){return t&&t.__esModule?t:{default:t}}function c(t){return f(t)||l(t)||d(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){if(t){if("string"===typeof t)return h(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(t,e):void 0}}function l(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return h(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var g=function(){o.e("node-modules/_@dcloudio_uni-ui@1.2.3@@dcloudio/uni-ui/lib/uni-nav-bar/uni-nav-bar").then(function(){return resolve(o("ac76"))}.bind(null,o)).catch(o.oe)},m=function(){o.e("components/activitySwiper").then(function(){return resolve(o("5eaa"))}.bind(null,o)).catch(o.oe)},p={data:function(){return{state:a.default.state,searchGoods:"",imgMsg:[],imgs:[],jumpMsg:[],activeIndex:0,childArr:[],childIndex:0,intervalTime:null,allStoreData:"测试广告，今天暂停营业，请不要下单,就算你下单了我也不会送，气死你，哈哈哈",marqueePace:2,marqueeDistance:0,marquee_margin:60,size:24,interval:60,storeInfo:null,menuOne:[],pageNo:1,goodsListArr:[],allowPull:!1}},components:{activitySwiper:m,uniNavBar:g},computed:{goodsCount:function(){var t=0;return this.state.cartGoods.forEach((function(e){t+=e.countNum})),t},goodsPrice:function(){var t=0;return this.state.cartGoods.forEach((function(e){t+=e.countNum*e.sellPrice})),t}},methods:{getShoppingCart:function(){s.default.getShoppingCart({storeId:this.storeInfo.storeId},(function(t){console.log("购物车商品列表",t),a.default.commit("setCartGoods",t.cartGoods),0==t.cartGoods.length?a.default.commit("setHasGoods",!1):a.default.commit("setHasGoods",!0)}))},jumpFun:function(e,o){e&&t.navigateTo({url:o})},getAdvertBanner:function(){var t=this;i.default.getAdvertBanner({communityId:this.state.communityId,displayPosition:"ggwz_fl"},(function(e){console.log("轮播图片地址",e),t.imgMsg=e.map((function(e){return e.picUrl=t.state.baseUrl+e.picUrl,e})),t.imgs=e.map((function(t){return t.picUrl})),t.jumpMsg=e.map((function(t){var e={};return e.jump=t.jump,e.jumpUrl=t.jumpUrl,e})),console.log("图片信息",t.imgs,t.imgMsg)}))},getStoreGoods:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"one",o={storeId:this.storeInfo.storeId,pageSize:10,pageNo:this.pageNo};this.childArr.length?"activity"==this.menuOne[this.activeIndex].type?o.activitySubType=this.childArr[this.childIndex].classifyId:o.goodsClassify=this.childArr[this.childIndex].classifyId:"activity"==this.menuOne[this.activeIndex].type?o.activityType=this.menuOne[this.activeIndex].classifyId:o.goodsClassify=this.menuOne[this.activeIndex].classifyId,n.default.getStoreGoods(o,(function(o){"one"==e?(t.goodsListArr=o.list,t.allowPull=!o.lastPage):(t.goodsListArr=[].concat(c(t.goodsListArr),c(o.list)),t.allowPull=!o.lastPage)}))},pageToGoodsDetail:function(e){t.navigateTo({url:"/pagesC/pages/goodsdetail/goodsdetail?goodsId="+e})},getSecondClassify:function(){var t=this;this.menuOne[this.activeIndex].classifyId?n.default.getSecondClassify({pId:this.menuOne[this.activeIndex].classifyId},(function(e){t.childArr=e,t.getStoreGoods()})):i.default.getDataDictionary2({parentId:this.menuOne[this.activeIndex].id},(function(e){var o=e.map((function(t){return t.classifyId=t.id,t.classifyName=t.name,t}));t.childArr=o,t.getStoreGoods()}))},getDataDictionary:function(){var t=this;i.default.getDataDictionary2({parentId:"sphdlx"},(function(e){var o=e.filter((function(t){return"none"!=t.id}));t.menuOne=[].concat(c(t.menuOne),c(o)),t.getGoodsClassify()}))},getGoodsClassify:function(){var t=this;n.default.getGoodsClassify({storeId:this.storeInfo.storeId},(function(e){console.log("商品类别",e);var o=e.map((function(t){return t.id=t.classifyId,t.name=t.classifyName,t}));t.menuOne=[].concat(c(t.menuOne),c(o)),t.getSecondClassify()}))},getStoreInfo:function(){var t=this,e={communityId:this.state.communityId};this.state.storeId&&(e.storeId=this.state.storeId),n.default.getStoreInfo(e,(function(e){t.storeInfo=e,t.storeInfo.storeTip="店铺关门了,就算你点我也不送,哈哈哈,啥玩意？就这？大威天龙",a.default.commit("setStoreId",e.storeId),t.getDataDictionary(),t.getShoppingCart(),t.scrolltxt()}))},scrolltxt:function(){var t=this;if(this.storeInfo.storeTip){var e=this.storeInfo.storeTip.length*this.size,o=460;console.log("文字宽度",e,this.storeInfo.storeTip.length),e>o?t.intervalTime=setInterval((function(){var o=e,n=t.marqueeDistance;n<o?t.marqueeDistance=n+t.marqueePace:(t.marqueeDistance=0,clearInterval(t.intervalTime),t.scrolltxt())}),t.interval):this.marquee_margin=1e3}},pageToShopCar:function(){t.navigateTo({url:"/pagesC/pages/shopcar/shopcar?storeId="+this.storeInfo.storeId})},pageToChooseStore:function(){t.navigateTo({url:"/pagesC/pages/choosestore/choosestore"})},consoleValue:function(){if(!this.searchGoods.trim())return t.showToast({title:"搜索内容不能为空",icon:"none"});t.navigateTo({url:"/pagesC/pages/goodsseachresult/goodsseachresult?content="+this.searchGoods+"&storeId="+this.storeInfo.storeId})},changeIndex:function(t){this.activeIndex!=t&&(this.activeIndex=t,this.childIndex=0,this.pageNo=1,this.getSecondClassify())},changeChildIndex:function(t){this.childIndex!=t&&(this.childIndex=t,this.pageNo=1,this.getStoreGoods())},onLoadMore:function(){this.allowPull&&(this.pageNo++,this.getStoreGoods("more"))}},onPullDownRefresh:function(){this.pageNo=1,this.getStoreGoods()},onShow:function(){var e=this;t.getSystemInfo({success:function(t){var e=t.windowWidth/750,o=((t.windowHeight-t.statusBarHeight-44)/e-70)*e;a.default.commit("setstatusBarHeight",o);var n=o-322*e;a.default.commit("setGoodsHei",n)}}),this.getStoreInfo(),this.state.goodsId&&(this.timer2=setTimeout((function(){t.navigateTo({url:"/pagesC/pages/goodsdetail/goodsdetail?goodsId="+e.state.goodsId,success:function(t){a.default.commit("setGoodsId","")}})}),500))},onLoad:function(t){this.getAdvertBanner()},onHide:function(){clearInterval(this.intervalTime),clearTimeout(this.timer2),this.goodsListArr=[],this.menuOne=[]}};e.default=p}).call(this,o("543d")["default"])},"538f":function(t,e,o){"use strict";o.r(e);var n=o("3bc1"),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"5bc6":function(t,e,o){"use strict";var n=o("89ee"),i=o.n(n);i.a},"89ee":function(t,e,o){},9777:function(t,e,o){"use strict";var n;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},c589:function(t,e,o){"use strict";(function(t){o("56cc");n(o("66fd"));var e=n(o("dafe"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},dafe:function(t,e,o){"use strict";o.r(e);var n=o("9777"),i=o("538f");for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("5bc6");var a,r=o("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports}},[["c589","common/runtime","common/vendor"]]]);