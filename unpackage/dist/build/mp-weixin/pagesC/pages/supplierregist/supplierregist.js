require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesC/pages/supplierregist/supplierregist"],{"0902":function(t,e,i){"use strict";i.r(e);var s=i("896e"),o=i("e1a3");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("434b");var r,a=i("f0c5"),l=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);e["default"]=l.exports},"24f3":function(t,e,i){},"434b":function(t,e,i){"use strict";var s=i("24f3"),o=i.n(s);o.a},"896e":function(t,e,i){"use strict";var s;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}));var o=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"9e4e":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=l(i("9bd8")),o=l(i("6174")),n=i("7a66"),r=l(i("2540")),a=l(i("b07d"));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){i.e("pagesC/components/xfl-select").then(function(){return resolve(i("307e"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("pagesC/components/neil-modal").then(function(){return resolve(i("4d67"))}.bind(null,i)).catch(i.oe)},d=function(){Promise.all([i.e("common/vendor"),i.e("pagesC/components/yq-avatar")]).then(function(){return resolve(i("7a20"))}.bind(null,i)).catch(i.oe)},f={components:{xflSelect:u,NeilModal:c,avatar:d},data:function(){return{state:r.default.state,list:[],list2:[],list3:[],typeArr:[],read:!1,show:!1,showTest:!1,isSign:-1,lat:"",lng:"",gisDisplayAdd:"",activityPic:"",failureCase:"",goodsClassify:"",supplierInfoObj:null,formObj:{supplierName:"",orgProperty:"",tradeType:"",addressgis:"",gisDisplayAdd:"",detailAddress:"",supplyRange:"",orgContactor:"",phonenum:"",licensePic:"",goodsClassify:"",supplierType:""}}},methods:{submitFun:function(){var e=this,i=this;if(!this.read)return t.showToast({title:"请先同意社区供应商协议~",icon:"none"});this.lat&&(this.formObj.addressgis=this.lat.toFixed(6)+","+this.lng.toFixed(6),this.formObj.gisDisplayAdd=this.gisDisplayAdd);var o=this.typeArr.filter((function(t){return t.check}));return this.formObj.goodsClassify=o.map((function(t){return t.classifyId})).join(";"),""==this.formObj.orgProperty&&(this.formObj.orgProperty=this.list[0].id),""==this.formObj.tradeType&&(this.formObj.tradeType=this.list2[0].id),""==this.formObj.supplierType&&(this.formObj.supplierType=this.list3[0].id),this.formObj.communityId=this.state.communityId,console.log(this.formObj),this.formObj.supplierName&&this.formObj.orgProperty&&this.formObj.tradeType&&this.formObj.addressgis&&this.formObj.gisDisplayAdd&&this.formObj.detailAddress&&this.formObj.supplyRange&&this.formObj.orgContactor&&this.formObj.phonenum&&this.formObj.licensePic&&this.formObj.goodsClassify&&this.formObj.supplierType?(0,n.isTel)(this.formObj.phonenum)?void s.default.applyForSupplier(this.formObj,(function(s){1==s.status?(t.showToast({title:s.msg,icon:"none"}),e.timer1=setTimeout((function(){i.getSupplierInfo()}),1500)):console.log(s)})):t.showToast({title:"手机号错误~",icon:"none"}):t.showToast({title:"信息不全~",icon:"none"})},getLocation:function(){var e=this;t.chooseLocation({success:function(t){r.default.commit("setLanLng",{latitude:t.latitude,longitude:t.longitude}),r.default.commit("setAddress",t.address),e.gisDisplayAdd=t.address,e.lat=t.latitude,e.lng=t.longitude}})},goSetting:function(t){var e=this;t.mp.detail.authSetting["scope.userLocation"]&&(r.default.commit("setPassAddr",!0),(0,n.getLocatio_LBS)((function(t){e.gisDisplayAdd=t.address,e.lat=t.latitude,e.lng=t.longitude})))},getDataDictionary:function(t){var e=this;o.default.getDataDictionary2({parentId:t},(function(i){"org_property"===t?e.list=i.map((function(t){return t.value=t.name,t})):"trade_type"===t?e.list2=i.map((function(t){return t.value=t.name,t})):"supplier_type"===t&&(e.list3=i.map((function(t){return t.value=t.name,t})))}))},getSupplierInfo:function(){var t=this;s.default.getSupplierInfo((function(e){e?(t.isSign=e.approveres,t.formObj.supplierName=e.supplierName,t.formObj.orgContactor=e.orgContactor,t.formObj.phonenum=e.phonenum,t.formObj.detailAddress=e.detailAddress,t.formObj.supplyRange=e.supplyRange,t.failureCase=e.failureCase,t.gisDisplayAdd=e.gisDisplayAdd,t.supplierInfoObj=e,t.lat=parseFloat(e.gisaddress.split(",")[0]),t.lng=parseFloat(e.gisaddress.split(",")[1]),t.goodsClassify=e.classify.split(";")):(t.isSign=-1,t.showTest=!0)}))},getGoodsClassify:function(){var t=this;a.default.getGoodsClassify({},(function(e){t.typeArr=e.map((function(t){return t.check=!1,t})),r.default.commit("setGoodsType",e)}))},setChoose:function(t){this.formObj.orgProperty=this.list[t.index].id},setChoose2:function(t){this.formObj.tradeType=this.list2[t.index].id},setChoose3:function(t){this.formObj.tradeType=this.list3[t.index]},changeChoose:function(t){this.typeArr[t].check=!this.typeArr[t].check},changeRead:function(){this.read=!this.read},showModal:function(){this.show=!0},closeModal:function(){this.show=!1},closeTest:function(){this.showTest=!1},changeIsSign:function(){this.isSign=-1},myUpload:function(e){t.showToast({title:"正在上传",icon:"loading",mask:!0,duration:1e3}),this.activityPic=e.path,this.formObj.licensePic=(0,n.getBase64)(e.path)}},onLoad:function(t){this.getSupplierInfo(),this.getDataDictionary("org_property"),this.getDataDictionary("trade_type"),this.getDataDictionary("supplier_type"),this.getGoodsClassify()}};e.default=f}).call(this,i("543d")["default"])},c221:function(t,e,i){"use strict";(function(t){i("56cc");s(i("66fd"));var e=s(i("0902"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},e1a3:function(t,e,i){"use strict";i.r(e);var s=i("9e4e"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=o.a}},[["c221","common/runtime","common/vendor"]]]);