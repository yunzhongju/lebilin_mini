require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/activitydetail/activitydetail"],{"655e":function(t,e,i){"use strict";i.r(e);var n=i("b18c"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},ab4b:function(t,e,i){"use strict";i.r(e);var n=i("fca7"),o=i("655e");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("db09");var c,r=i("f0c5"),l=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=l.exports},b18c:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i("2540")),o=c(i("ad4c")),a=c(i("75d1"));function c(t){return t&&t.__esModule?t:{default:t}}function r(t){return d(t)||u(t)||s(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"===typeof t)return y(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(t){if(Array.isArray(t))return y(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var m=function(){i.e("components/activitySwiper").then(function(){return resolve(i("5eaa"))}.bind(null,i)).catch(i.oe)},v={data:function(){return{state:n.default.state,activeIndex:0,replyContent:"",showReply:!1,showModel:!1,checkType:"志愿者",activityId:"",activityDetailArr:[],activityType:"",inputType:"",commentArr:[],pageNo:1,allowPull:!0,replyObj:null,memberArr:[],pageNoM:1,personTotal:0,qrCodeUrl:"",allowMemberPull:!1,attendanceNum:0}},components:{activitySwiper:m},methods:{lookImg:function(e,i){t.setStorageSync("currentImgIndex",e);var n=i.map((function(t){return{filePath:t}}));t.setStorageSync("imgPreviewPicList",n),t.navigateTo({url:"/pagesB/pages/imgPreview/imgPreview"})},getInfo:function(t){a.default.bindgetuserinfo(t)},getActivityMember:function(t){var e=this;o.default.getActivityMember(t,(function(t){console.log(t),e.attendanceNum=t.attendanceNum,"one"?(e.qrCodeUrl=t.qrCodeUrl,e.personTotal=t.member.totalRow,e.memberArr=t.member.list,e.allowMemberPull=!t.lastPage,console.log("成员信息第一页",e.qrCodeUrl,e.personTotal)):(console.log("成员信息更多",t.member.list),e.memberArr=[].concat(r(e.memberArr),r(t.member.list)),e.allowMemberPull=!t.lastPage)}))},clickActivity:function(){this.thumbsUp({likeContent:this.activityId,likeType:"activity"})},checkState:function(t){this.commentArr[t].isThumbsUp=!this.commentArr.isThumbsUp,this.commentArr[t].thumbsUp+=1,this.thumbsUp({likeContent:this.commentArr[t].commentId,likeType:"comment"})},thumbsUp:function(t){var e=this;o.default.thumbsUp(t,(function(i){console.log(i.msg),"activity"==t.likeType&&e.getActivityDetail({activityId:t.likeContent})}))},addCommentReply:function(e){var i=this;0!=e.replyContent.trim().length&&o.default.addCommentReply(e,(function(e){t.showToast({title:e.msg,icon:"none"}),i.pageNo=1,i.getActivityComment({activityId:i.activityId,pageNo:1,pageSize:4})}))},addActivityComment:function(e){var i=this;0!=e.commentContent.trim().length&&o.default.addActivityComment(e,(function(e){t.showToast({title:e.msg,icon:"none"}),i.pageNo=1,i.getActivityComment({activityId:i.activityId,pageNo:1,pageSize:4})}))},pageToRelease:function(){t.navigateTo({url:"/pagesB/pages/release/release?id="+this.activityId})},getActivityComment:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one";"one"==i?o.default.getActivityComment(t,(function(t){console.log(t.list),e.commentArr=t.list,e.allowPull=!t.lastPage})):o.default.getActivityComment(t,(function(t){console.log("评论列表",t.list),e.commentArr=[].concat(r(e.commentArr),r(t.list)),e.allowPull=!t.lastPage}))},getActivityDetail:function(t){var e=this;o.default.getActivityDetail(t,(function(t){e.activityDetailArr=t,e.activityType=t.theme.join()}))},signUpActivity:function(e){var i=this,n=this;o.default.signUpActivity(e,(function(e){t.showToast({title:e.msg,icon:"none"}),n.timer=setTimeout((function(){n.getActivityDetail({activityId:i.activityId})}),500)}))},openModel:function(){this.showModel=!0},closeModel:function(){this.showModel=!1},radioChange:function(t){this.checkType=t.target.value},subType:function(t){var e="志愿者"==this.checkType?"volunteer":"user";console.log(e),this.signUpActivity({activityId:this.activityId,role:e}),this.showModel=!1},pageToReply:function(e){t.navigateTo({url:"/pagesB/pages/reply/reply?item="+JSON.stringify(e)+"&activityId="+this.activityId})},changeIndex:function(t){this.activeIndex!=t&&(this.activeIndex=t)},published:function(){console.log(this.replyContent,this.inputType),"reply"==this.inputType?(this.replyObj.activityId=this.activityId,this.replyObj.replyContent=this.replyContent,this.addCommentReply(this.replyObj)):"comment"==this.inputType&&(console.log({activityId:this.activityId,commentContent:this.replyContent}),this.addActivityComment({activityId:this.activityId,commentContent:this.replyContent})),this.replyContent="",this.showReply=!1},showReplyFun:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showReply=!0,this.inputType=t,this.replyObj=e},hideReplyFun:function(){this.showReply=!1}},onLoad:function(t){t.activeIndex&&(this.activeIndex=t.activeIndex),this.activityId=t.activityId||"",this.getActivityDetail({activityId:t.activityId}),this.getActivityComment({activityId:t.activityId,pageNo:1,pageSize:4}),this.getActivityMember({activityId:this.activityId,pageSize:100,pageNo:this.pageNoM})},onPullDownRefresh:function(){this.pageNo=1,this.getActivityDetail({activityId:this.activityId}),this.getActivityComment({activityId:this.activityId,pageNo:1,pageSize:4})},onReachBottom:function(){this.allowPull&&0==this.activeIndex?(this.pageNo++,this.getActivityComment({activityId:this.activityId,pageNo:this.pageNo,pageSize:4},"more")):this.allowMemberPull&&1==this.activeIndex&&(this.pageNoM++,this.getActivityMember({activityId:this.activityId,pageSize:30,pageNo:this.pageNoM},"more"))},onShareAppMessage:function(t){if("button"===t.from){var e=t.target.dataset.activityid;return o.default.shareActivity({activityId:e},(function(t){console.log(t)})),{title:"活动分享",path:"/pagesB/pages/activitydetail/activitydetail?activityId="+e}}},onHide:function(){this.timer=""}};e.default=v}).call(this,i("543d")["default"])},bbc3:function(t,e,i){},db09:function(t,e,i){"use strict";var n=i("bbc3"),o=i.n(n);o.a},fb7d:function(t,e,i){"use strict";(function(t){i("56cc");n(i("66fd"));var e=n(i("ab4b"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},fca7:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement;t._self._c},a=[]}},[["fb7d","common/runtime","common/vendor"]]]);