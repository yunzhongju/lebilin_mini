require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/applyvolunteer/applyvolunteer"],{1394:function(t,e,n){"use strict";n.r(e);var r=n("79db"),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},"4e27":function(t,e,n){"use strict";(function(t){n("56cc");r(n("66fd"));var e=r(n("b716"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"79db":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("7a66"),a=o(n("6132")),i=o(n("2540"));function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return d(t)||l(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function l(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=function(){Promise.all([n.e("common/vendor"),n.e("pagesB/components/yq-avatar")]).then(function(){return resolve(n("7181"))}.bind(null,n)).catch(n.oe)},v={components:{avatar:h},data:function(){return{state:i.default.state,sexArr:[],sexIndex:0,typeArr:[],typeIndex:0,faceArr:[],faceIndex:0,eduArr:[],eduIndex:0,skillArr:[],activeArr:[],avatarUrl:"",avatarUrlBase64:"",phoneNum:"",preventSub:!0}},methods:{formSubmit:function(e){var n=this;if(this.preventSub){this.preventSub=!1;var i=e.detail.value;if(i.header=this.avatarUrlBase64,i.skills=u(this.activeArr).join(),i.sex=this.sexArr[this.sexIndex].id,i.idType=this.typeArr[this.typeIndex].id,i.politics=this.faceArr[this.faceIndex].id,i.communityId=this.state.communityId,this.education=this.eduArr[this.eduIndex].id,!i.personName||!i.header||!i.idNo||!i.mobile||!i.skills)return t.showToast({title:"带*和头像为必填哦 ~",icon:"none"});if(!(0,r.isTel)(i.mobile))return t.showToast({title:"手机号错误",icon:"none"});if(0==this.typeIndex&&!(0,r.isCard)(i.idNo))return t.showToast({title:"身份证格式错误",icon:"none"});console.log("参数",i),a.default.joinVolunteer(i,(function(e){t.showToast({title:e.msg,icon:"none"}),1==e.status&&(n.preventSub=!0,t.redirectTo({url:"/pagesB/pages/volunteerteam/volunteerteam"}))}))}},sexChange:function(t){this.sexIndex=t.target.value},typeChange:function(t){this.typeIndex=t.target.value},faceChange:function(t){this.faceIndex=t.target.value},eduChange:function(t){this.eduIndex=t.target.value},changeStatus:function(t){this.activeArr.includes(t)?this.activeArr=this.activeArr.filter((function(e){return e!=t})):this.activeArr.push(t)},myUpload:function(e){t.showToast({title:"正在上传",icon:"loading",mask:!0,duration:1e3}),this.avatarUrl=e.path,this.avatarUrlBase64=(0,r.getBase64)(this.avatarUrl)},getPhoneNumFun:function(t){var e=this,n={};n.iv=t.detail.iv,n.encryptedData=t.detail.encryptedData,a.default.getPhoneNumber(n,(function(t){console.log(t),e.phoneNum=t.data}))}},onLoad:function(t){var e=this;a.default.getUserInfoOptions((function(t){console.log("信息",t),e.sexArr=t.sex,e.typeArr=t.cardType,e.faceArr=t.politics,e.eduArr=t.education,e.skillArr=t.skills})),i.default.state.userInfo.mobile&&(this.phoneNum=i.default.state.userInfo.mobile)}};e.default=v}).call(this,n("543d")["default"])},"7ebc":function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.skillArr,(function(e,n){var r=t.__get_orig(e),a=t.activeArr.includes(e.id);return{$orig:r,g0:a}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},b1e0:function(t,e,n){},b716:function(t,e,n){"use strict";n.r(e);var r=n("7ebc"),a=n("1394");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("f136");var o,u=n("f0c5"),s=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=s.exports},f136:function(t,e,n){"use strict";var r=n("b1e0"),a=n.n(r);a.a}},[["4e27","common/runtime","common/vendor"]]]);