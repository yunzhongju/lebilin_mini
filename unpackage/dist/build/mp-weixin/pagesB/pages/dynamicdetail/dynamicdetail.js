require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/dynamicdetail/dynamicdetail"],{"0d5f":function(t,e,n){"use strict";n.r(e);var i=n("6e14"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},1373:function(t,e,n){"use strict";var i=n("2b36"),o=n.n(i);o.a},"2b36":function(t,e,n){},"4c15":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"6e14":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("2540")),o=a(n("ad4c"));a(n("838e"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){return u(t)||s(t)||l(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var m={data:function(){return{state:i.default.state,articleId:"",inputType:"comment",commentArr:[],pageNo:1,allowPull:!0,replyObj:null,showReply:!1,replyContent:"",String:"",dynamicObj:{}}},methods:{getArticleDetail:function(){var t=this,e=this;o.default.getArticleDetail({articleId:e.articleId},(function(e){t.dynamicObj=e;var n=e.content;t.String=n=n.replace(/<img/gi,'< img style="max-width:100%;height:auto;display:block" class="imgsty" ').replace(/<html/g,"<div").replace(/\/html>/g,"/div>").replace(/<body/g,"<div").replace(/\/body>/g,"/div>"),console.log(t.String)}))},getActivityComment:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one";"one"==n?o.default.getActivityComment(t,(function(t){console.log(t.list),e.commentArr=t.list,e.allowPull=!t.lastPage})):o.default.getActivityComment(t,(function(t){console.log("评论列表",t),e.commentArr=[].concat(r(e.commentArr),r(t.list)),e.allowPull=!t.lastPage}))},checkState:function(t){this.commentArr[t].isThumbsUp=!this.commentArr.isThumbsUp,this.commentArr[t].thumbsUp+=1,this.thumbsUp({likeContent:this.commentArr[t].commentId,likeType:"comment"})},thumbsUp:function(t){o.default.thumbsUp(t,(function(t){console.log(t.msg)}))},published:function(){console.log(this.replyContent,this.inputType),"reply"==this.inputType?(this.replyObj.activityId=this.articleId,this.replyObj.replyContent=this.replyContent,this.addCommentReply(this.replyObj)):"comment"==this.inputType&&(console.log({activityId:this.articleId,commentContent:this.replyContent}),this.addActivityComment({activityId:this.articleId,commentContent:this.replyContent})),this.replyContent="",this.showReply=!1},addActivityComment:function(e){var n=this;0!=e.commentContent.trim().length&&o.default.addActivityComment(e,(function(e){t.showToast({title:e.msg,icon:"none"}),n.pageNo=1,n.getActivityComment({activityId:n.articleId,pageNo:1,pageSize:4})}))},addCommentReply:function(e){var n=this;o.default.addCommentReply(e,(function(e){t.showToast({title:e.msg,icon:"none"}),n.pageNo=1,n.getActivityComment({activityId:n.articleId,pageNo:1,pageSize:4})}))},showReplyFun:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showReply=!0,this.inputType=t,this.replyObj=e},hideReplyFun:function(){this.showReply=!1},pageToReply:function(e){t.navigateTo({url:"/pagesB/pages/reply/reply?item="+JSON.stringify(e)+"&activityId="+this.articleId})}},onLoad:function(t){this.articleId=t.articleId,console.log(this.articleId),this.getArticleDetail(),this.getActivityComment({activityId:this.articleId,pageNo:1,pageSize:4})},onPullDownRefresh:function(){this.pageNo=1,this.getActivityComment({activityId:this.articleId,pageNo:this.pageNo,pageSize:4})},onReachBottom:function(){this.allowPull&&(this.pageNo++,this.getActivityComment({activityId:this.articleId,pageNo:this.pageNo,pageSize:4},"more"))}};e.default=m}).call(this,n("543d")["default"])},c489:function(t,e,n){"use strict";(function(t){n("56cc");i(n("66fd"));var e=i(n("e30c"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e30c:function(t,e,n){"use strict";n.r(e);var i=n("4c15"),o=n("0d5f");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("1373");var r,c=n("f0c5"),l=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=l.exports}},[["c489","common/runtime","common/vendor","pagesB/common/vendor"]]]);