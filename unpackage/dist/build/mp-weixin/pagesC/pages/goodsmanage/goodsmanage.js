require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesC/pages/goodsmanage/goodsmanage"],{"15b5":function(t,i,e){"use strict";var o=e("e415"),n=e.n(o);n.a},"3d41":function(t,i,e){"use strict";e.r(i);var o=e("b75d"),n=e("fcf1");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("15b5");var r,a=e("f0c5"),c=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);i["default"]=c.exports},b75d:function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var n=function(){var t=this,i=t.$createElement;t._self._c},s=[]},d389:function(t,i,e){"use strict";(function(t){e("56cc");o(e("66fd"));var i=o(e("3d41"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},e415:function(t,i,e){},ee28:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=a(e("b07d")),n=a(e("6174")),s=e("7a66"),r=a(e("2540"));function a(t){return t&&t.__esModule?t:{default:t}}var c=function(){e.e("pagesC/components/xfl-select").then(function(){return resolve(e("307e"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("pagesC/components/yu-datetime-picker").then(function(){return resolve(e("c47e"))}.bind(null,e)).catch(e.oe)},l={components:{xflSelect:c,yuDatetimePicker:u},data:function(){return{state:r.default.state,tagArr:[],list:[],acStarTime:"请选择时间",goodsId:"",supplierId:"",storeId:"",sellCount:10,goodsDetail:null,sellPrice:"",setTop:!0,xianshiOrpin:0,showBtn:!0,goodsPartTwo:[],activityTypeTwo:0,fightPrice:"",oneByCount:1}},methods:{subFun:function(){var i=this,e=this,n={supplyGoodsId:this.goodsId,supplierId:this.supplierId,storeId:this.storeId,price:this.goodsDetail.marketPrice,sellPrice:this.sellPrice?parseFloat(this.sellPrice).toFixed(2):"",quantity:this.sellCount,totop:this.setTop},s=this.tagArr.filter((function(t){return t.check}));if(s.length&&(n.goodsLable=s.map((function(t){return t.id})).join(";")),1==this.xianshiOrpin?(n.activityType=this.list[1].id,n.activitySubType=this.goodsPartTwo[this.activityTypeTwo].id,n.endTime=this.acStarTime,n.limitNumber=this.oneByCount):2==this.xianshiOrpin&&(n.activityType=this.list[2].id,n.activitySubType=this.goodsPartTwo[this.activityTypeTwo].id,n.groupBuyPrice=this.fightPrice?parseFloat(this.fightPrice).toFixed(2):""),!n.supplyGoodsId||!n.supplierId||!n.storeId||!n.price||!n.sellPrice||!n.quantity)return t.showToast({title:"信息不全",icon:"none"});if(n.quantity.toString().includes(".")||n.quantity<=0)return t.showToast({title:"上架数量必须为整数且大于0",icon:"none"});if(n.sellPrice&&n.sellPrice<=0)return t.showToast({title:"商品售价必须大于0",icon:"none"});if(1==this.xianshiOrpin){if("请选择时间"==n.endTime)return t.showToast({title:"请选择截止时间",icon:"none"});if(n.limitNumber.toString().includes(".")||n.limitNumber<=0)return t.showToast({title:"限购数量必须为整数且大于0",icon:"none"})}2==this.xianshiOrpin&&n.groupBuyPrice<=0&&t.showToast({title:"拼单价格必须大于0",icon:"none"}),o.default.addStoreGoods(n,(function(o){1==o.status&&(t.showToast({title:o.msg,icon:"none"}),e.timer=setTimeout((function(){t.redirectTo({url:"/pagesC/pages/goodsshelves/goodsshelves?supplierId=".concat(i.supplierId,"&storeId=").concat(i.storeId)})}),1500))}))},getDataDictionarypartTwo:function(t){var i=this;n.default.getDataDictionary2(t,(function(t){var e=t.map((function(t){return t.value=t.name,t}));i.goodsPartTwo=Array.from(e)}))},getDataDictionary:function(t){var i=this;n.default.getDataDictionary2({parentId:t},(function(e){if("goods_lable"==t)i.tagArr=e.map((function(t){return t.check=!1,t}));else if("sphdlx"==t){var o=e.map((function(t){return t.value=t.name,t}));i.list=Array.from(o),i.getDataDictionarypartTwo({parentId:e[0].id})}}))},getSupplyGoodsDetail:function(t){var i=this;o.default.getSupplyGoodsDetail(t,(function(t){console.log(t),i.goodsDetail=t}))},changeSetTop:function(t){this.setTop=t},changeCheck:function(t){this.tagArr[t].check=!this.tagArr[t].check},setChoose:function(t){this.xianshiOrpin=t.index,this.goodsPartTwo=[],this.getDataDictionarypartTwo({parentId:this.list[t.index].id})},setChoose2:function(t){this.activityTypeTwo=t.index},showBtns:function(){this.showBtn=!0},getStopTimer:function(i){var e=i.selectArr.join(""),o=(0,s.getNowTime)();if(this.showBtn=!0,e<=o)return t.showToast({title:"截止时间必须大于当前时间",icon:"none"});this.acStarTime=i.selectRes},showTime:function(){this.$refs.dateTime.show(),this.showBtn=!1}},onLoad:function(t){this.goodsId=t.goodsId||"",this.supplierId=t.supplierId||"",this.storeId=t.storeId||"",this.getSupplyGoodsDetail({goodsId:t.goodsId,supplierId:t.supplierId}),this.getDataDictionary("sphdlx"),this.getDataDictionary("goods_lable")},onHide:function(){clearTimeout(this.timer)}};i.default=l}).call(this,e("543d")["default"])},fcf1:function(t,i,e){"use strict";e.r(i);var o=e("ee28"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a}},[["d389","common/runtime","common/vendor"]]]);