require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesC/pages/goodsdetail/goodsdetail"],{"1bd4":function(t,o,e){},"26fa":function(t,o,e){"use strict";e.r(o);var s=e("956b"),i=e("98e4");for(var n in i)"default"!==n&&function(t){e.d(o,t,(function(){return i[t]}))}(n);e("98ed");var r,a=e("f0c5"),c=Object(a["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);o["default"]=c.exports},"43c6":function(t,o,e){"use strict";(function(t){e("56cc");s(e("66fd"));var o=s(e("26fa"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"4b70":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=a(e("b3a3")),i=a(e("b07d")),n=a(e("77c2")),r=a(e("2540"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,s)}return e}function d(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?c(Object(e),!0).forEach((function(o){u(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}function u(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var l=function(){e.e("pagesC/components/popup-layer").then(function(){return resolve(e("a2ec"))}.bind(null,e)).catch(e.oe)},f={components:{PopupLayer:l},data:function(){return{state:r.default.state,goodsCount:1,byOrAdd:1,storeId:"",goodsId:"",goodsDetail:null,specials:null,isTuan:!1,hypdzjlid:""}},methods:{getShoppingCart:function(){s.default.getShoppingCart({storeId:this.storeInfo.storeId},(function(t){console.log("购物车商品列表",t),r.default.commit("setCartGoods",t.cartGoods),0==t.cartGoods.length?r.default.commit("setHasGoods",!1):r.default.commit("setHasGoods",!0)}))},pageToPay:function(){var o=this;if(1==this.byOrAdd){var e={storeId:this.goodsDetail.storeId,productId:this.goodsId,quantity:this.goodsCount.toString()};if(null!=this.specials){var i=[];for(var a in this.specials)i.push(this.specials[a].id);e.specificationId=i.join(";")}1==this.isTuan?(e.isTuan=!0,""!=this.hypdzjlid&&(e.hypdzjlid=this.hypdzjlid)):e.isTuan=!1,console.log("参数",e),n.default.confirmOrder(e,(function(o){o&&(r.default.commit("setStoreIdtwo",o.storeId),t.navigateTo({url:"/pagesC/pages/sureorder/sureorder?confirmOrderInfo="+encodeURIComponent(JSON.stringify(o))}))}))}else if(2==this.byOrAdd){var c={productId:this.goodsId,quantity:this.goodsCount};if(null!=this.specials){var d=[];for(var u in this.specials)d.push(this.specials[u].id);c.specificationId=d.join(";")}console.log("参数",c),s.default.addToCart(c,(function(e){t.showToast({title:e.msg,icon:"none"}),o.$refs.popupRef.close(),o.getShoppingCart()}))}},chooseOne:function(t,o){this.specials=Object.assign(d({},this.specials),u({},t,o)),console.log("规格",this.specials)},getGoodsDetail:function(){var t=this,o=this;i.default.getGoodsDetail({goodsId:this.goodsId},(function(e){console.log(e),t.goodsDetail=e,r.default.commit("setStoreId",e.storeId),e.specification&&e.specification.length&&e.specification.forEach((function(t){var e=t.type,s=u({},e,t.param[0]);o.specials=Object.assign(d({},o.specials),s)}))}))},showModal:function(t,o){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.$refs.popupRef.show(),this.byOrAdd=t,this.isTuan=o,this.hypdzjlid=""!=e?e:""},closeModal:function(){this.$refs.popupRef.close()},changeNum:function(o){if(this.goodsDetail.stock<=this.goodsCount&&1==o)return t.showToast({title:"库存不足~",icon:"none"});this.goodsCount+=o},pageToShopCar:function(){t.navigateTo({url:"/pagesC/pages/shopcar/shopcar?storeId="+this.goodsDetail.storeId})}},computed:{groupList:function(){var t=[];if(null!=this.goodsDetail&&this.goodsDetail.groupBuy.length)for(var o=[],e=0;e<this.goodsDetail.groupBuy.length;e++)o.push(this.goodsDetail.groupBuy[e]),e%2!=1&&e!=this.goodsDetail.groupBuy.length-1||(t.push(o),o=[]);return console.log("拼单列表",t),t}},onLoad:function(t){this.goodsId=t.goodsId,this.getGoodsDetail()},onHide:function(){this.$refs.popupRef.close()},onShareAppMessage:function(t){if("button"===t.from){var o=this.goodsId;return{title:this.goodsDetail.goodsName,path:"/pagesC/pages/goodsdetail/goodsdetail?goodsId="+o,imageUrl:this.state.baseUrl+this.goodsDetail.detailPic[0]}}}};o.default=f}).call(this,e("543d")["default"])},"956b":function(t,o,e){"use strict";var s;e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return n})),e.d(o,"a",(function(){return s}));var i=function(){var t=this,o=t.$createElement;t._self._c},n=[]},"98e4":function(t,o,e){"use strict";e.r(o);var s=e("4b70"),i=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(o,t,(function(){return s[t]}))}(n);o["default"]=i.a},"98ed":function(t,o,e){"use strict";var s=e("1bd4"),i=e.n(s);i.a}},[["43c6","common/runtime","common/vendor","pagesC/common/vendor"]]]);