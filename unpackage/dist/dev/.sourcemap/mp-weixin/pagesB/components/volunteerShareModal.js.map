{"version":3,"sources":["webpack:///D:/fengzhi_work/lebilin_mini/pagesB/components/volunteerShareModal.vue?a443","webpack:///D:/fengzhi_work/lebilin_mini/pagesB/components/volunteerShareModal.vue?6a6a","webpack:///D:/fengzhi_work/lebilin_mini/pagesB/components/volunteerShareModal.vue?a14f","webpack:///D:/fengzhi_work/lebilin_mini/pagesB/components/volunteerShareModal.vue?6b48","uni-app:///pagesB/components/volunteerShareModal.vue","webpack:///D:/fengzhi_work/lebilin_mini/pagesB/components/volunteerShareModal.vue?fc63","webpack:///D:/fengzhi_work/lebilin_mini/pagesB/components/volunteerShareModal.vue?3963"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4I;AAC5I;AACuE;AACL;AACsC;;;AAGxG;AACiL;AACjL,gBAAgB,2LAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,0GAAM;AACR,EAAE,mHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAsrB,CAAgB,msBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACQ1sB,2E;AACA;AACA;AACA;AACA,kBADA;AAEA,mFAFA,EADA;;AAKA;AACA,kBADA;AAEA,uBAFA,EALA;;AASA;AACA,kBADA;AAEA,uDAFA,EATA,EADA;;;AAeA,MAfA,kBAeA;AACA;AACA,iCADA;AAEA,gBAFA;AAGA,gBAHA;AAIA,eAJA;AAKA,mBALA;;AAOA,GAvBA;AAwBA;AACA,oBADA,8BACA,EADA;AAEA;AACA,cAHA,wBAGA;AACA;AACA;AACA,KANA;AAOA;AACA,UARA,oBAQA;AACA;AACA,iCADA;AAEA,4BAFA;;AAIA;AACA,gDANA,CAMA;AACA,gDAPA,CAOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCApBA;AAqBA,oEArBA,UAqBA,SArBA;AAsBA,uBAtBA,GAsBA,eAtBA;AAuBA;AACA;;AAEA;AACA,wBA3BA;AA4BA;AACA,uEADA;AAEA,+CA9BA;AA+BA;AACA,kBAhCA,GAgCA,OAhCA;AAiCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAxCA,0CAyCA,mCAzCA,SAyCA,SAzCA;AA0CA,kBA1CA,GA0CA,eA1CA;AA2CA,kBA3CA,GA2CA,eA3CA;AA4CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAlEA,0CAmEA,gCAnEA,SAmEA,SAnEA;AAoEA;AACA,mBADA;;AAGA;AACA;;AAEA,wBA1EA,GA0EA,sBA1EA;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA;;AAIA;AACA;AACA;AACA;AACA,mBAFA;AAGA,iBAJA,EAIA,GAJA,EApFA;AAyFA,KAjGA;AAkGA;AACA,sBAnGA,8BAmGA,GAnGA,EAmGA,GAnGA,EAmGA,KAnGA,EAmGA,KAnGA,EAmGA,KAnGA,EAmGA,IAnGA,EAmGA,UAnGA,EAmGA,QAnGA,EAmGA,GAnGA,EAmGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;;AAIA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAnKA;AAoKA;AACA,kBArKA,0BAqKA,GArKA,EAqKA,CArKA,EAqKA,CArKA,EAqKA,MArKA,EAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7KA;AA8KA;AACA,gBA/KA,wBA+KA,GA/KA,EA+KA,EA/KA,EA+KA,EA/KA,EA+KA,EA/KA,EA+KA,EA/KA,EA+KA,UA/KA,EA+KA;AACA,oCADA,CACA;AACA,0BAFA,CAEA;AACA;AACA,oBADA,EACA;AACA,oBAFA,EAEA;AACA,4EAHA;AAIA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KAhMA;AAiMA;AACA,gBAlMA,wBAkMA,GAlMA,EAkMA,GAlMA,EAkMA,CAlMA,EAkMA,CAlMA,EAkMA,KAlMA,EAkMA,MAlMA,EAkMA,MAlMA,EAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlNA;AAmNA;AACA,aApNA,qBAoNA,GApNA,EAoNA,GApNA,EAoNA,CApNA,EAoNA,CApNA,EAoNA,CApNA,EAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7NA;AA8NA;AACA,iBA/NA,yBA+NA,GA/NA,EA+NA,CA/NA,EA+NA,CA/NA,EA+NA,KA/NA,EA+NA,MA/NA,EA+NA,MA/NA,EA+NA,KA/NA,EA+NA;AACA;AACA;AACA;AACA;AACA,+BALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3OA;AA4OA,aA5OA,qBA4OA,GA5OA,EA4OA,CA5OA,EA4OA,CA5OA,EA4OA,CA5OA,EA4OA,CA5OA,EA4OA,CA5OA,EA4OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9PA;AA+PA;AACA,gBAhQA,wBAgQA,MAhQA,EAgQA;AACA;AACA;AACA,qBADA;AAEA;AACA;AACA;AACA,WALA;AAMA;AACA;AACA;AACA,WATA;;AAWA,OAZA;AAaA,KA9QA;AA+QA;AACA,aAhRA,uBAgRA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA,mBACA,GADA,EACA;AACA;AACA,iBAHA;;AAKA,aAPA,MAOA;AACA;AACA;AACA;AACA,yBADA,mBACA,GADA,EACA;AACA;AACA,mBAHA;;AAKA;AACA;AACA,WAnBA,MAmBA;AACA;AACA;AACA,SAzBA;;AA2BA;AACA;AACA,6BADA;AAEA,kBAFA;AAGA;AACA;AACA;AACA,sCADA;AAEA,mBAFA,mBAEA,GAFA,EAEA;AACA;AACA,+BADA;AAEA,+BAFA;AAGA,8BAHA;;AAKA;AACA;AACA,eAFA,EAEA,IAFA;AAGA,aAXA;;AAaA,SAlBA;AAmBA,UAnBA;AAoBA,KAlUA,EAxBA,E;;;;;;;;;;;;;ACTA;AAAA;AAAA;AAAA;AAA2wC,CAAgB,6tCAAG,EAAC,C;;;;;;;;;;;ACA/xC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesB/components/volunteerShareModal.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./volunteerShareModal.vue?vue&type=template&id=5fb0215c&scoped=true&\"\nvar renderjs\nimport script from \"./volunteerShareModal.vue?vue&type=script&lang=js&\"\nexport * from \"./volunteerShareModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./volunteerShareModal.vue?vue&type=style&index=0&id=5fb0215c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fb0215c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesB/components/volunteerShareModal.vue\"\nexport default component.exports","export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./volunteerShareModal.vue?vue&type=template&id=5fb0215c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      _vm.isShow = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./volunteerShareModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./volunteerShareModal.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\" v-if=\"isShow\" @click.stop=\"isShow=false\" @catchtouchmove=\"preventTouchMove\">\r\n\t\t<canvas @click.stop=\"\" :style=\"{ width: canvasW + 'px', height: canvasH + 'px' }\" canvas-id=\"my-canvas\"></canvas>\r\n\t\t<view class=\"save-btn\" @click.stop=\"saveImage\">保存图片</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport store from '@/store'\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\theaderImg: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'https://oss.zhangyubk.com/%E8%8D%89%E8%8E%93%E5%8D%83%E5%B1%82.png'\r\n\t\t\t},\r\n\t\t\ttitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '草莓千层蛋糕'\r\n\t\t\t},\r\n\t\t\tqrcode: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'https://oss.zhangyubk.com/cmqrcode.jpg'\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstate: store.state,\r\n\t\t\t\tcanvasW: 0,\r\n\t\t\t\tcanvasH: 0,\r\n\t\t\t\tctx: null,\r\n\t\t\t\tisShow: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tpreventTouchMove() {},\r\n\t\t\t//显示\r\n\t\t\tshowCanvas() {\r\n\t\t\t\tthis.isShow = true\r\n\t\t\t\tthis.__init()\r\n\t\t\t},\r\n\t\t\t//初始化画布\r\n\t\t\tasync __init() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tthis.ctx = uni.createCanvasContext('my-canvas', this)\r\n\t\t\t\tthis.canvasW = uni.upx2px(591); //画布宽\r\n\t\t\t\tthis.canvasH = uni.upx2px(989); //画布高\r\n\r\n\t\t\t\t//设置画布背景透明\r\n\t\t\t\tthis.ctx.setFillStyle('rgba(255, 255, 255, 0)')\r\n\t\t\t\t//设置画布大小\r\n\t\t\t\tthis.ctx.fillRect(0, 0, this.canvasW, this.canvasH)\r\n\t\t\t\t//绘制圆角背景\r\n\t\t\t\tthis.ctx.save()\r\n\t\t\t\t// this.drawRoundRect(this.ctx, 0, 0, this.canvasW, this.canvasH, uni.upx2px(20), '#FFFFFF')\r\n\t\t\t\tthis.ctx.setFillStyle(\"#fff\")\r\n\t\t\t\tthis.roundRect(this.ctx, 0, 0, this.canvasW, this.canvasH, uni.upx2px(20))\r\n\r\n\t\t\t\t//获取头像图片\r\n\t\t\t\tthis.ctx.restore()\r\n\t\t\t\tlet headerUrl = await this.getImageInfo(this.state.userInfo.headerUrl)\r\n\t\t\t\tlet headBgH = uni.upx2px(120)\r\n\t\t\t\t//绘制头像\r\n\t\t\t\tthis.circleImg(this.ctx, headerUrl.path, uni.upx2px(54), ((headBgH - uni.upx2px(88)) / 2), uni.upx2px(44))\r\n\r\n\t\t\t\t//昵称、ID、cdkey\r\n\t\t\t\tconst nickName =\r\n\t\t\t\t\tthis.state.userInfo.personName.length > 10 ?\r\n\t\t\t\t\tthis.state.userInfo.personName.substring(0, 8) + \"...\" :\r\n\t\t\t\t\tthis.state.userInfo.personName;\r\n\t\t\t\t// const ID = \"ID:\" + this.state.userInfo.personCode;\r\n\t\t\t\tconst ID = '招募志愿者';\r\n\t\t\t\t//绘制\r\n\t\t\t\tthis.ctx.setFontSize(uni.upx2px(26))\r\n\t\t\t\tthis.ctx.setFillStyle('#000')\r\n\t\t\t\tthis.ctx.setTextAlign('left')\r\n\t\t\t\tthis.ctx.fillText(nickName, uni.upx2px(170), uni.upx2px(70))\r\n\r\n\t\t\t\tthis.ctx.save()\r\n\t\t\t\t//获取背景图片\r\n\t\t\t\tlet headerImg = await this.getImageInfo(this.headerImg)\r\n\t\t\t\tlet hW = uni.upx2px(591);\r\n\t\t\t\tlet hH = uni.upx2px(654);\r\n\t\t\t\t//绘制背景图\r\n\t\t\t\t// this.drawRoundImg(this.ctx, headerImg.path, ((this.canvasW - hW) / 2), headBgH, hW, hH, 0)\r\n\t\t\t\tthis.ctx.drawImage(headerImg.path, ((this.canvasW - hW) / 2), headBgH, hW, hH)\r\n\r\n\t\t\t\t//绘制背景框 + 小程序码\r\n\t\t\t\tthis.ctx.fillStyle = '#ffffff'\r\n\t\t\t\t// 阴影的x偏移\r\n\t\t\t\tthis.ctx.shadowOffsetX = uni.upx2px(8);\r\n\t\t\t\t// 阴影的y偏移\r\n\t\t\t\tthis.ctx.shadowOffsetY = uni.upx2px(4);\r\n\t\t\t\t// 阴影颜色\r\n\t\t\t\tthis.ctx.shadowColor = 'rgba(0,0,0,0.4)';\r\n\t\t\t\t//阴影模糊尺寸\r\n\t\t\t\tthis.ctx.shadowBlur = uni.upx2px(10)\r\n\r\n\t\t\t\t//绘制背景框\r\n\t\t\t\tthis.ctx.beginPath()\r\n\t\t\t\tthis.ctx.arc((this.canvasW / 2), uni.upx2px(756), uni.upx2px(100), 0, 2 * Math.PI)\r\n\t\t\t\tthis.ctx.fill()\r\n\t\t\t\tthis.ctx.restore()\r\n\t\t\t\tthis.ctx.closePath()\r\n\r\n\t\t\t\t//绘制小程序码\r\n\t\t\t\tlet qrCodeImg = await this.getImageInfo(this.qrcode)\r\n\t\t\t\tthis.ctx.drawImage(qrCodeImg.path, ((this.canvasW - uni.upx2px(170)) / 2), uni.upx2px(671), uni.upx2px(170), uni.upx2px(\r\n\t\t\t\t\t170))\r\n\r\n\t\t\t\t//绘制底部文本\r\n\t\t\t\t/* this.canvasTextAutoLine(this.title, this.ctx, uni.upx2px(34), uni.upx2px(906), \"#000\", uni.upx2px(24), uni.upx2px(\r\n\t\t\t\t\t40), uni.upx2px(512), 2) */\r\n\t\t\t\tlet titleArr = this.title.split('。')\r\n\t\t\t\ttitleArr[0] = titleArr[0] + '。'\r\n\t\t\t\tthis.ctx.setFontSize(uni.upx2px(24))\r\n\t\t\t\tthis.ctx.setFillStyle(\"#000\")\r\n\t\t\t\tthis.ctx.setTextAlign('center')\r\n\t\t\t\ttitleArr.forEach((item, index) => {\r\n\t\t\t\t\tthis.ctx.fillText(item, (this.canvasW / 2), (uni.upx2px(906) + index * uni.upx2px(40)))\r\n\t\t\t\t})\r\n\r\n\t\t\t\t//延迟渲染\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.ctx.draw(true, () => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\t//绘制多行文本，超出显示省略号\r\n\t\t\tcanvasTextAutoLine(str, ctx, initX, initY, style, font, lineHeight, maxWidth, row) {\r\n\r\n\t\t\t\tvar lineWidth = 0;\r\n\r\n\t\t\t\tvar lastSubStrIndex = 0;\r\n\r\n\t\t\t\tctx.setFontSize(font);\r\n\r\n\t\t\t\t// ctx.font = `normal bold ${font} sans-serif`;\r\n\r\n\t\t\t\tctx.setFillStyle(style);\r\n\r\n\t\t\t\tctx.setTextAlign(\"left\");\r\n\r\n\t\t\t\tvar currentRow = 1;\r\n\r\n\t\t\t\tmaxWidth = Math.ceil(maxWidth);\r\n\r\n\t\t\t\tfor (let i = 0; i < str.length; i++) {\r\n\r\n\t\t\t\t\tlineWidth += ctx.measureText(str[i]).width;\r\n\r\n\t\t\t\t\t// console.log(lineWidth)\r\n\r\n\t\t\t\t\tif (lineWidth > maxWidth) {\r\n\r\n\t\t\t\t\t\t// console.log(maxWidth, \"最大宽度\")\r\n\r\n\t\t\t\t\t\tcurrentRow++;\r\n\r\n\t\t\t\t\t\tlet newStr = str.substring(lastSubStrIndex, i + 1)\r\n\r\n\t\t\t\t\t\tif (currentRow > row && str.length > i) {\r\n\r\n\t\t\t\t\t\t\tnewStr = str.substring(lastSubStrIndex, i - 2) + '...'\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tctx.fillText(newStr, initX, initY);\r\n\r\n\t\t\t\t\t\tinitY += lineHeight;\r\n\r\n\t\t\t\t\t\tlineWidth = 0;\r\n\r\n\t\t\t\t\t\tlastSubStrIndex = i + 1;\r\n\r\n\r\n\r\n\t\t\t\t\t\tif (currentRow > row) {\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (i == str.length - 1) {\r\n\r\n\t\t\t\t\t\tctx.fillText(str.substring(lastSubStrIndex, i + 1), initX, initY);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t//绘制实心圆\r\n\t\t\tdrawEmptyRound(ctx, x, y, radius) {\r\n\t\t\t\tctx.save()\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(x, y, radius, 0, 2 * Math.PI, true);\r\n\t\t\t\tctx.setFillStyle('rgba(0, 0, 0, .4)')\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore()\r\n\t\t\t\tctx.closePath()\r\n\t\t\t},\r\n\t\t\t//绘制虚线\r\n\t\t\tdrawDashLine(ctx, x1, y1, x2, y2, dashLength) {\r\n\t\t\t\tctx.setStrokeStyle(\"#cccccc\") //设置线条的颜色\r\n\t\t\t\tctx.setLineWidth(1) //设置线条宽度\r\n\t\t\t\tvar dashLen = dashLength,\r\n\t\t\t\t\txpos = x2 - x1, //得到横向的宽度;\r\n\t\t\t\t\typos = y2 - y1, //得到纵向的高度;\r\n\t\t\t\t\tnumDashes = Math.floor(Math.sqrt(xpos * xpos + ypos * ypos) / dashLen);\r\n\t\t\t\t//利用正切获取斜边的长度除以虚线长度，得到要分为多少段;\r\n\t\t\t\tfor (var i = 0; i < numDashes; i++) {\r\n\t\t\t\t\tif (i % 2 === 0) {\r\n\t\t\t\t\t\tctx.moveTo(x1 + (xpos / numDashes) * i, y1 + (ypos / numDashes) * i);\r\n\t\t\t\t\t\t//有了横向宽度和多少段，得出每一段是多长，起点 + 每段长度 * i = 要绘制的起点；\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.lineTo(x1 + (xpos / numDashes) * i, y1 + (ypos / numDashes) * i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t},\r\n\t\t\t//带圆角图片\r\n\t\t\tdrawRoundImg(ctx, img, x, y, width, height, radius) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.save()\r\n\t\t\t\t// 左上角\r\n\t\t\t\tctx.arc(x + radius, y + radius, radius, Math.PI, Math.PI * 1.5)\r\n\t\t\t\t// 右上角\r\n\t\t\t\tctx.arc(x + width - radius, y + radius, radius, Math.PI * 1.5, Math.PI * 2)\r\n\t\t\t\t// 右下角\r\n\t\t\t\tctx.arc(x + width - radius, y + height - radius, radius, 0, Math.PI * 0.5)\r\n\t\t\t\t// 左下角\r\n\t\t\t\tctx.arc(x + radius, y + height - radius, radius, Math.PI * 0.5, Math.PI)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.clip()\r\n\t\t\t\tctx.drawImage(img, x, y, width, height);\r\n\t\t\t\tctx.restore()\r\n\t\t\t\tctx.closePath()\r\n\t\t\t},\r\n\t\t\t//圆形图片\r\n\t\t\tcircleImg(ctx, img, x, y, r) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tvar d = 2 * r;\r\n\t\t\t\tvar cx = x + r;\r\n\t\t\t\tvar cy = y + r;\r\n\t\t\t\tctx.arc(cx, cy, r, 0, 2 * Math.PI);\r\n\t\t\t\tctx.clip();\r\n\t\t\t\tctx.drawImage(img, x, y, d, d);\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\t//圆角矩形\r\n\t\t\tdrawRoundRect(ctx, x, y, width, height, radius, color) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.setFillStyle(color);\r\n\t\t\t\tctx.setStrokeStyle(color)\r\n\t\t\t\tctx.setLineJoin('round'); //交点设置成圆角\r\n\t\t\t\tctx.setLineWidth(radius);\r\n\t\t\t\tctx.strokeRect(x + radius / 2, y + radius / 2, width - radius, height - radius);\r\n\t\t\t\tctx.fillRect(x + radius, y + radius, width - radius * 2, height - radius * 2);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.restore()\r\n\t\t\t},\r\n\t\t\troundRect(ctx, x, y, w, h, r) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tif (w < 2 * r) {\r\n\t\t\t\t\tr = w / 2;\r\n\t\t\t\t}\r\n\t\t\t\tif (h < 2 * r) {\r\n\t\t\t\t\tr = h / 2;\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.setFillStyle('white')\r\n\t\t\t\tctx.moveTo(x + r, y);\r\n\t\t\t\tctx.arcTo(x + w, y, x + w, y + h, r);\r\n\t\t\t\tctx.arcTo(x + w, y + h, x, y + h, r);\r\n\t\t\t\tctx.arcTo(x, y + h, x, y, r);\r\n\t\t\t\tctx.arcTo(x, y, x + w, y, r);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.draw(true);\r\n\t\t\t},\r\n\t\t\t//获取图片\r\n\t\t\tgetImageInfo(imgSrc) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: imgSrc,\r\n\t\t\t\t\t\tsuccess: (image) => {\r\n\t\t\t\t\t\t\tresolve(image);\r\n\t\t\t\t\t\t\tconsole.log('获取图片成功', image)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t\t\tconsole.log('获取图片失败', err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//保存图片到相册\r\n\t\t\tsaveImage() {\r\n\t\t\t\t//判断用户授权\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('获取用户权限', res.authSetting)\r\n\t\t\t\t\t\tif (Object.keys(res.authSetting).length > 0) {\r\n\t\t\t\t\t\t\t//判断是否有相册权限\r\n\t\t\t\t\t\t\tif (res.authSetting['scope.writePhotosAlbum'] == undefined) {\r\n\t\t\t\t\t\t\t\t//打开设置权限\r\n\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('设置权限', res.authSetting)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\t\t\t\t//打开设置权限\r\n\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('设置权限', res.authSetting)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: 'my-canvas',\r\n\t\t\t\t\tquality: 1,\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\tconsole.log('保存到相册', res);\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '已保存到相册',\r\n\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthat.isShow = false\r\n\t\t\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.content {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground: rgba(0, 0, 0, .4);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\t.save-btn {\r\n\t\t\twidth: 591rpx;\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tfont-size: 35rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground: #ff2f29;\r\n\t\t\theight: 85rpx;\r\n\t\t\tline-height: 85rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./volunteerShareModal.vue?vue&type=style&index=0&id=5fb0215c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./volunteerShareModal.vue?vue&type=style&index=0&id=5fb0215c&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1614740800659\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}