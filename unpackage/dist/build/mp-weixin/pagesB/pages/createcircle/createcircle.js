require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/createcircle/createcircle"],{2034:function(t,e,a){"use strict";a.r(e);var c=a("9405"),n=a("94f0");for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);a("b75b");var o,l=a("f0c5"),s=Object(l["a"])(n["default"],c["b"],c["c"],!1,null,null,null,!1,c["a"],o);e["default"]=s.exports},"20cd":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=r(a("75d1")),n=r(a("ea0a")),i=r(a("6174")),o=r(a("2540")),l=r(a("375e")),s=a("7a66");function r(t){return t&&t.__esModule?t:{default:t}}var u=function(){Promise.all([a.e("common/vendor"),a.e("pagesB/components/yq-avatar")]).then(function(){return resolve(a("7181"))}.bind(null,a)).catch(a.oe)},d={components:{avatar:u},data:function(){return{state:o.default.state,count1:0,count2:0,circleId:"",code:0,circleInfo:null,avatarUrl:"",actDetailImg:[],personImg:[],clickStatus:!0}},methods:{_success2:function(e){for(var a=0;a<e.length;a++)this.personImg.push(e[a]);t.hideLoading()},uploadActImg2:function(){var e=this;if(e.personImg.length>=9)t.showToast({title:"最多上传9张图哦~",icon:"none",mask:!0});else{var a={_success:this._success2,count:9-this.personImg.length};l.default.chooseImg(a)}},delImg2:function(t){this.personImg.splice(t,1)},delImg:function(t){this.actDetailImg.splice(t,1)},uploadActImg:function(){var e=this;if(e.actDetailImg.length>=9)t.showToast({title:"最多上传9张图哦~",icon:"none",mask:!0});else{var a={_success:this._success,count:9-this.actDetailImg.length};l.default.chooseImg(a)}},_success:function(e){for(var a=0;a<e.length;a++)this.actDetailImg.push(e[a]);t.hideLoading()},formSubmit:function(e){var a=this,i=e.detail.value;if(this.clickStatus)if(this.clickStatus=!1,i.circleName&&i.circleIntroduce){i.communityId=this.state.communityId,i.headerUrl=this.avatarUrl;for(var o=[],l=0;l<this.actDetailImg.length;l++)o.push((0,s.getBase64)(this.actDetailImg[l]));i.introducePics=o.join(";");for(var r=[],u=0;u<this.personImg.length;u++)r.push((0,s.getBase64)(this.personImg[u]));i.selfIntroducePics=r.join(";"),console.log(i),n.default.createCircle(i,(function(e){1==e.status&&(a.clickStatus=!0,t.navigateTo({url:"/pagesB/pages/allcircle/allcircle?type=ICreated"}))}))}else c.default._error({title:"圈子名称和圈子介绍为必填哦~"})},formSubmit2:function(e){var a=this,i=e.detail.value;if(this.clickStatus)if(this.clickStatus=!1,i.circleName&&i.circleIntroduce){i.communityId=this.state.communityId,i.circleId=this.circleId,i.headerUrl=this.avatarUrl;for(var o=[],l=0;l<this.actDetailImg.length;l++)o.push((0,s.getBase64)(this.actDetailImg[l]));i.introducePics=o.join(";");for(var r=[],u=0;u<this.personImg.length;u++)r.push((0,s.getBase64)(this.personImg[u]));i.selfIntroducePics=r.join(";"),console.log(i),n.default.createCircle(i,(function(e){1==e.status&&(a.clickStatus=!0,t.showToast({title:"圈子修改成功",icon:"none"}),setTimeout((function(){t.navigateTo({url:"/pagesB/pages/allcircle/allcircle?type=ICreated"})}),500))}))}else c.default._error({title:"圈子名称和圈子介绍为必填哦~"})},changeCount1:function(t){this.count1=t.detail.value.length},changeCount2:function(t){this.count2=t.detail.value.length},getCircleDetail:function(t){var e=this;n.default.getCircleInfo(t,(function(t){console.log("圈子信息",t),e.circleInfo=t,e.avatarUrl=t.headerUrl,e.count1=t.circleIntroduce.length,e.count2=t.selfIntroduce.length,e.actDetailImg=t.introducePics.map((function(t){return t.filePath})),e.personImg=t.selfIntroducePics.map((function(t){return t.filePath})),console.log("头像地址",e.avatarUrl)}))},myUpload:function(e){var a=this;t.showToast({title:"正在上传",icon:"loading",mask:!0,duration:1e3}),this.avatarUrl=e.path,i.default.uploadPic({filePath:e.path,name:"circle"},(function(e){console.log("res.data",e),1==JSON.parse(e.data).status?(console.log(123,JSON.parse(e.data).data[0]),a.avatarUrl=JSON.parse(e.data).data[0]):t.showToast({title:"图片上传失败",icon:"loading",mask:!0,duration:1e3})}))}},onLoad:function(t){console.log(t),this.circleId=t.circleId||"",this.code=t.code||0,t.circleId&&this.getCircleDetail({circleId:t.circleId})}};e.default=d}).call(this,a("543d")["default"])},9405:function(t,e,a){"use strict";var c;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return c}));var n=function(){var t=this,e=t.$createElement;t._self._c},i=[]},9458:function(t,e,a){"use strict";(function(t){a("56cc");c(a("66fd"));var e=c(a("2034"));function c(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"94f0":function(t,e,a){"use strict";a.r(e);var c=a("20cd"),n=a.n(c);for(var i in c)"default"!==i&&function(t){a.d(e,t,(function(){return c[t]}))}(i);e["default"]=n.a},b75b:function(t,e,a){"use strict";var c=a("e5a7"),n=a.n(c);n.a},e5a7:function(t,e,a){}},[["9458","common/runtime","common/vendor","pagesB/common/vendor"]]]);